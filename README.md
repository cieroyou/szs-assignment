## **í”„ë¡œì íŠ¸ ê°œìš”**

**ðŸ”¹ ì£¼ìš” ê¸°ëŠ¥**
- **íšŒì›ê°€ìž… & ë¡œê·¸ì¸**: JWT ê¸°ë°˜ ì¸ì¦ ë° í—ˆê°€ëœ ì‚¬ìš©ìžë§Œ ê°€ìž… ê°€ëŠ¥
- **ì—°ë§ì •ì‚° ë°ì´í„° ìŠ¤í¬ëž˜í•‘**: ì™¸ë¶€ APIë¥¼ í†µí•´ ì†Œë“ ë° ê³µì œ ì •ë³´ ì¡°íšŒ
- **ê²°ì •ì„¸ì•¡ ê³„ì‚°**: ê³¼ì„¸í‘œì¤€ì— ë”°ë¥¸ ì‚°ì¶œì„¸ì•¡ ë° ì„¸ì•¡ê³µì œ ë°˜ì˜
- **API ë¬¸ì„œ ì œê³µ**: Swagger UIë¥¼ í†µí•´ API ëª…ì„¸ í™•ì¸ ë° í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

**ðŸ”¹ ê¸°ìˆ  ìŠ¤íƒ**

- Java 17
- Spring Boot 3.4.3
- Spring Security
- JPA
- H2 Database
- Lombok
- SpringDoc
- Junit & Mockito

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
â”œâ”€â”€ common                   # ê³µí†µ ìœ í‹¸ ë° ì „ì—­
â”‚Â Â  â”œâ”€â”€ AesEncryptor.java
â”‚Â Â  â”œâ”€â”€ AllowedUsers.java       # íšŒì›ê°€ìž… í—ˆìš©í•˜ëŠ” ì‚¬ìš©ìž ëª©ë¡
â”‚Â Â  â”œâ”€â”€ NumberFormatUtil.java
â”‚Â Â  â”œâ”€â”€ TokenProvider.java      # í† í°ê´€ë¦¬
â”‚Â Â  â””â”€â”€ response                # ê³µí†µì‘ë‹µê°ì²´
â”œâ”€â”€ configuration            # Spring ì„¤ì •ê´€ë ¨ í´ëž˜ìŠ¤
â”‚Â Â  â”œâ”€â”€ AppConfig.java
â”‚Â Â  â”œâ”€â”€ JwtTokenValidatorFilter.java
â”‚Â Â  â”œâ”€â”€ SecurityConfig.java
â”‚Â Â  â”œâ”€â”€ SpringDocConfig.java
â”‚Â Â  â””â”€â”€ TaxRateConfig.java
â”œâ”€â”€ controller               # API ì—”ë“œí¬ì¸íŠ¸
â”‚Â Â  â”œâ”€â”€ SzsController.java
â”œâ”€â”€ domain                   # í•µì‹¬ ë„ë©”ì¸ ëª¨ë¸
â”‚Â Â  â”œâ”€â”€ TaxBracket.java         # ì„¸ìœ¨êµ¬ê°„
â”‚Â Â  â”œâ”€â”€ User.java               # ì‚¬ìš©ìž 
â”‚Â Â  â””â”€â”€ UserIncome.java         # ì‚¬ìš©ìž ì—°ë§ì •ì‚°
â”œâ”€â”€ exception                # ì˜ˆì™¸ì²˜ë¦¬ ê´€ë ¨ í´ëž˜ìŠ¤
â”‚Â Â  â”œâ”€â”€ BaseException.java
â”‚Â Â  â”œâ”€â”€ ErrorCode.java
â”‚Â Â  â””â”€â”€ GlobalExceptionHandler.java
â”œâ”€â”€ infrastructure          # ì™¸ë¶€ API ë° ë°ì´í„° ë ˆì´ì–´
â”‚Â Â  â”œâ”€â”€ ScrapingApiCaller.java
â”‚Â Â  â”œâ”€â”€ ScrapingHttpApiCaller.java
â”‚Â Â  â”œâ”€â”€ UserIncomeRepository.java
â”‚Â Â  â”œâ”€â”€ UserRepository.java
â””â”€â”€ service                 # í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    â”œâ”€â”€ LoginService.java
    â”œâ”€â”€ RefundService.java
    â”œâ”€â”€ ScrapingService.java
    â”œâ”€â”€ SignupService.java
    â””â”€â”€ TaxCalculator.java  # ì‚°ì¶œì„¸ì•¡ ê³„ì‚°ê¸°

```

**ðŸ”¹ ì£¼ìš” íŒ¨í‚¤ì§€ ì„¤ëª…**

- **common** â†’ ì „ì—­ ìœ í‹¸ë¦¬í‹° ë° ë³´ì•ˆ ê´€ë ¨ ì„¤ì • ê´€ë¦¬
- **configuration** â†’ Spring Security ë° ì„¤ì • ê´€ë ¨ í´ëž˜ìŠ¤ ê´€ë¦¬
- **controller** â†’ API ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ê³„ì¸µ
- **domain** â†’ í•µì‹¬ ë„ë©”ì¸ ëª¨ë¸ ì •ì˜
- **exception** â†’ ì»¤ìŠ¤í…€ ì˜ˆì™¸ ë° ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§ ê´€ë¦¬
- **infrastructure** â†’ DB ë° ì™¸ë¶€ API í˜¸ì¶œ ë“± ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µ
- **service** â†’ ì£¼ìš” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬

## API ë¬¸ì„œ

### **Swagger ì—°ë™**

- API í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ Swagger UI ì œê³µ
- JWT í† í° ìš”ì²­ì´ ê°€ëŠ¥í•˜ë„ë¡ í•¨
- **ì ‘ì† ê²½ë¡œ**: [localhost:8080/3o3/swagger.html](http://localhost:8080/3o3/swagger.html)

### API ìƒì„¸ ì„¤ëª…

- íšŒì›ê°€ìž…
    - ê¸°ë“±ë¡ëœ ì‚¬ìš©ìž ëª©ë¡ì— ìžˆëŠ” ì‚¬ìš©ìžë§Œ ê°€ìž… ê°€ëŠ¥
    - ìš”ì²­ ì˜ˆì‹œ

        ```
        {
          "userId": "user123",
          "password": "password123",
          "name": "ë™íƒ",
          "regNo": "921108-1582816"
        }
        
        ```

    - ì‘ë‹µ ë°˜í™˜ ì—†ìŒ
    - ì˜ˆì™¸ ì¼€ì´ìŠ¤
        - `400 BAD_REQUEST` â†’ ìœ íš¨í•˜ì§€ ì•Šì€ ìš”ì²­ ê°’ (ì¤‘ë³µ ì•„ì´ë””, ê¸°ë“±ë¡ëœ ì‚¬ìš©ìžê°€ ì•„ë‹˜)

- ë¡œê·¸ì¸
    - Id, Password ë¡œ ë¡œê·¸ì¸ í›„, JWT Access Token ë°œê¸‰
    - ìš”ì²­ ì˜ˆì‹œ

        ```
        {
          "userId": "user123",
          "password": "password123"
        }
        ```

    - ì‘ë‹µ ì˜ˆì‹œ

        ```
        {
          "data": {
            "accessToken": "eyJbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        }
        ```

    - ì˜ˆì™¸ ì¼€ì´ìŠ¤
        - `401 UNAUTHORIZED` â†’ ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìž, ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜

- ì—°ë§ì •ì‚° ë°ì´í„° ìŠ¤í¬ë ˆí•‘
    - ë¡œê·¸ì¸í•œ ì‚¬ìš©ìžì˜ ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ë¥¼ ë³µí˜¸í™”í•˜ì—¬, ì™¸ë¶€ APIë¥¼ í†µí•´ ì—°ë§ì •ì‚° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
    - ìš”ì²­ í—¤ë”

        ```json
        Authorization: Bearer {accessToken}
        ```

    - ì‘ë‹µ ë°˜í™˜ ì—†ìŒ
    - ì˜ˆì™¸ ì¼€ì´ìŠ¤
        - `401 UNAUTHORIZED` â†’ ì¸ì¦ ì‹¤íŒ¨
        - `500 INTERNAL_SERVER_ERROR` â†’ ì™¸ë¶€ API ì˜¤ë¥˜

- ê²°ì •ì„¸ì•¡ ì¡°íšŒ
    - ì‚¬ìš©ìž ì—°ë§ì •ì‚° ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê²°ì •ì„¸ì•¡ ì¡°íšŒ
    - ì—†ëŠ” ê²½ìš° ë¹„ì–´ìžˆëŠ” ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
    - ìš”ì²­ í—¤ë”

        ```json
        Authorization: Bearer {accessToken}
        ```

    - ì‘ë‹µ ì˜ˆì‹œ

        ```json
        {
          "data": [
            {
              "year": 2023,
              "ê²°ì •ì„¸ì•¡": "150,000"
            },
            {
              "year": 2022,
              "ê²°ì •ì„¸ì•¡": "-50,000"
            }
          ]
        }
        
        ```

    - ì˜ˆì™¸ ì¼€ì´ìŠ¤
        - `401 UNAUTHORIZED` â†’ ì¸ì¦ ì‹¤íŒ¨

## âœ… **í•„ìˆ˜ ìš”êµ¬ ì‚¬í•­**
- âœ”ï¸ **Java 17, Spring Boot 3.x, JPA, H2, Gradle**ì„ í™œìš©í•©ë‹ˆë‹¤.
- âœ”ï¸ í”„ë¡œì íŠ¸ **ë¬¸ìž ì§‘í•©ì€ `UTF-8`**ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
- âœ”ï¸ ì„œë²„ í¬íŠ¸ëŠ” ê¸°ë³¸ê°’ **8080**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- âœ”ï¸ **DBëŠ” H2 Database**, ë©”ëª¨ë¦¬ ëª¨ë“œë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.
- âœ”ï¸ **íšŒì›ê°€ìž…, ë¡œê·¸ì¸, ìŠ¤í¬ëž˜í•‘, í™˜ê¸‰ì•¡ ê³„ì‚° API**ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
- âœ”ï¸ ëª¨ë“  ìš”ì²­, ì‘ë‹µì— ëŒ€í•´ **`application/json` íƒ€ìž…**ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.
- âœ”ï¸ **Swagger UI ê²½ë¡œ**ëŠ” `/3o3/swagger.html`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- âœ”ï¸ **ë¯¼ê°ì •ë³´(ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸, ë¹„ë°€ë²ˆí˜¸ ë“±)ì€ ì•”í˜¸í™”í•˜ì—¬ ì €ìž¥**í•©ë‹ˆë‹¤.

## ðŸ›  **ìž‘ì—… ëª©ë¡ ë° êµ¬í˜„ ë°©ë²•**

### ðŸ”¹ **íšŒì›ê°€ìž… ë° ì‚¬ìš©ìž ë“±ë¡**

- **ì‚¬ì „ ë“±ë¡ëœ ì‚¬ìš©ìžë§Œ ê°€ìž… ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„**
  â†’ ì „ì—­ ë³€ìˆ˜(`AllowedUsers`)ë¡œ ì‚¬ìš©ìž ëª©ë¡ì„ ê´€ë¦¬ (ê°„ë‹¨í•˜ì§€ë§Œ, ì‚¬ìš©ìž ë³€ê²½ ì‹œ í´ëž˜ìŠ¤ ìˆ˜ì • ë° ë°°í¬ í•„ìš”)
- **ê³µí†µ ì‘ë‹µ ê·œê²© ì ìš© (`CommonResponse`)**
  â†’ API ì‘ë‹µ í˜•ì‹ì„ í†µì¼í•˜ì—¬ ì¼ê´€ì„± ìœ ì§€

### ðŸ”¹ **ë³´ì•ˆ ë° ë°ì´í„° ë³´í˜¸**

- **ë¡œê·¸ì¸ ë°©ì‹ Spring Security í‘œì¤€ ì¸ì¦ íë¦„ í™œìš©**
  â†’ UserDetailsServiceì™€ AuthenticationProviderë¥¼ í™œìš©í•˜ì—¬, ì´í›„ OAuth2, JWT Refresh Token ë“±ì„ ì¶”ê°€í•  ë•Œë„ ê¸°ì¡´ ì¸ì¦ íë¦„ì„ ë³€ê²½í•˜ì§€ ì•Šê³  í™•ìž¥ ê°€ëŠ¥
- **ë¹„ë°€ë²ˆí˜¸ëŠ” `BCryptPasswordEncoder`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¨ë°©í–¥ ì•”í˜¸í™”**
  â†’ Spring Securityì˜ `PasswordEncoder`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³´ì•ˆì„±ì„ ê°•í™”í•˜ê³ , `salt`ê°€ ì ìš©ëœ ì•”í˜¸í™”ë¥¼ í†µí•´ ë™ì¼í•œ ë¹„ë°€ë²ˆí˜¸ë¼ë„ ë‹¤ë¥¸ í•´ì‹œê°’ì´ ìƒì„±ë˜ë„ë¡ ì²˜ë¦¬
- **ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ëŠ” ì–‘ë°©í–¥ ì•”í˜¸í™” (`AES`) ì‚¬ìš©**
  â†’ ë³µí˜¸í™”ê°€ í•„ìš”í•œ ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ëŠ” AESë¡œ ì•”í˜¸í™” í›„ ì €ìž¥, ì‚¬ìš© ì‹œ ë³µí˜¸í™” ê°€ëŠ¥í•˜ë„ë¡ ì²˜ë¦¬
  â†’ API ì‘ë‹µì—ëŠ” ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ê°€ í¬í•¨ë˜ì§€ ì•Šë„ë¡ ì£¼ì˜
- **Spring Security ê¸°ë°˜ì˜ ì¸ì¦/ì¸ê°€ ì ìš©**
  â†’ `JwtTokenValidatorFilter`ë¥¼ í†µí•´ í† í° ê²€ì¦ ë° ì‚¬ìš©ìž ì¸ì¦ ìˆ˜í–‰

### ðŸ”¹ **ì™¸ë¶€ API í˜¸ì¶œ (`Scraping`)**

- **í´ë¦° ì•„í‚¤í…ì²˜ ì ìš©í•˜ì—¬ ì¸í„°íŽ˜ì´ìŠ¤ì™€ êµ¬í˜„ ë¶„ë¦¬**
  â†’ API í˜¸ì¶œì„ `ScrapingApiCaller` ì¸í„°íŽ˜ì´ìŠ¤ë¡œ ì¶”ìƒí™”í•˜ê³ , `ScrapingHttpApiCaller`ì—ì„œ êµ¬í˜„
- **ì‘ë‹µ ë°ì´í„°ë¥¼ `ScrapingData` ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ì €ìž¥**
  â†’ ë¶ˆí•„ìš”í•œ ì›ë³¸ ë°ì´í„°ëŠ” ì œì™¸í•˜ê³  í•„ìš”í•œ ë°ì´í„° í•„ë“œë§Œ ì¶”ì¶œ
- API í˜¸ì¶œ ì¤‘ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ê°•í™”í•˜ì—¬ ì˜¤ë¥˜ ë°œìƒ ì‹œ ì›ì¸ ì¶”ì  ê°€ëŠ¥
- ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ëŠ” ë¡œê·¸ì— ë§ˆìŠ¤í‚¹í•˜ì—¬ ë³´ì•ˆ ê°•í™”

```
[Scraping API ìš”ì²­] ìš”ì²­ ë°ì´í„°: ScrapingRequest(name=ë™íƒ, regNo=921108--*******)
[Scraping API í˜¸ì¶œ ì‹¤íŒ¨] ì˜ˆì™¸ ë°œìƒ: 401 Unauthorized on POST request for "https://codetest-v4.3o3.co.kr/scrap": [no body]
```

### ðŸ”¹ **ì—°ë§ì •ì‚° ê²°ì •ì„¸ì•¡ ê³„ì‚° (`Refund`)**

- **`ScrapingData`ë¥¼ `UserIncome`ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì €ìž¥**
  â†’ ìœ ì§€ë³´ìˆ˜ì„±ì„ ìœ„í•´ ë°ì´í„° ë³€í™˜ ë¡œì§ì€ `ScrapingData` ë‚´ë¶€ì—ì„œ ì²˜ë¦¬í•˜ì—¬ ì„œë¹„ìŠ¤ë ˆì´ì–´ ê°€ë…ì„±ì„ ë†’ìž„
- **ì‚°ì¶œì„¸ì•¡ ê³„ì‚° ë°©ì‹ ë³€ê²½ ê°€ëŠ¥ì„±ì„ ê³ ë ¤í•˜ì—¬ `yml` ì„¤ì •ì„ í™œìš©**
  â†’ ì¶”í›„ ì„¸ìœ¨ ë³€ê²½ ì‹œ ì½”ë“œ ìˆ˜ì • ì—†ì´ `application.yml`ì—ì„œ ì¡°ì • ê°€ëŠ¥

  â†’ ì¶”í›„ ymlì—ì„œ dbë¡œ ì €ìž¥ì†Œë¥¼ ì˜®ê¸°ë©´ ë³€ê²½í•´ë„ ë°°í¬ì—†ì´ ë°˜ì˜ì´ ê°€ëŠ¥


```yaml
tax:
  brackets:
    - lowerBound: 0
      upperBound: 14000000
      taxRate: 0.06
      progressiveDeduction: 0
    - lowerBound: 14000001
      upperBound: 50000000
      taxRate: 0.15
      progressiveDeduction: 840000
    - lowerBound: 50000001
      upperBound: 88000000
      taxRate: 0.24
      progressiveDeduction: 6240000
    - lowerBound: 88000001
      upperBound: 150000000
      taxRate: 0.35
      progressiveDeduction: 15360000
    - lowerBound: 150000001
      upperBound: 300000000
      taxRate: 0.38
      progressiveDeduction: 19400000
    - lowerBound: 300000001
      upperBound: 500000000
      taxRate: 0.40
      progressiveDeduction: 25400000
    - lowerBound: 500000001
      upperBound: 1000000000
      taxRate: 0.42
      progressiveDeduction: 37406000
    - lowerBound: 1000000001
      upperBound: 999999999999
      taxRate: 0.45
      progressiveDeduction: 38406000
```

- **ì‚°ì¶œì„¸ì•¡ = ëˆ„ì§„ê³µì œ + (ê³¼ì„¸í‘œì¤€ - ê¸°ì¤€) * ì„¸ìœ¨**
  â†’ ì†Œë“ì„¸ìœ¨ ê¸°ì¤€ì´ ë³€ê²½ë  ê²½ìš°ì—ë„ ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìžˆë„ë¡ `TaxRateConfig`ì— ì •ì˜

    ```java
    private final TaxRateConfig taxRateConfig;
    public BigDecimal calculateTax(BigDecimal taxableIncome) {
      for (TaxRateConfig.TaxBracket bracket : taxRateConfig.getBrackets()) {
        if (taxableIncome.compareTo(bracket.getLowerBound()) >= 0 &&
            taxableIncome.compareTo(bracket.getUpperBound()) <= 0) {
          return calculateTax(taxableIncome, bracket.getLowerBound(), bracket.getTaxRate(), bracket.getProgressiveDeduction());
        }
      }
      return BigDecimal.ZERO;
    }
      
    /**
     * // ì‚°ì¶œì„¸ì•¡ = ëˆ„ì§„ê³µì œ + (ê³¼ì„¸í‘œì¤€ - ê¸°ì¤€) * ì„¸ìœ¨
     *
     * @param taxableIncome        ê³¼ì„¸í‘œì¤€
     * @param lowerBound           ê¸°ì¤€
     * @param taxRate              ì„¸ìœ¨
     * @param progressiveDeduction ëˆ„ì§„ê³µì œ
     * @return ì‚°ì¶œì„¸ì•¡
     */
    public static BigDecimal calculateTax(BigDecimal taxableIncome, BigDecimal lowerBound, BigDecimal taxRate, BigDecimal progressiveDeduction) {
      return taxableIncome.subtract(lowerBound) // ê¸°ì¤€ê°’ ì°¨ê°
        .multiply(taxRate) //  ì„¸ìœ¨ ì ìš©
          .add(progressiveDeduction) // ëˆ„ì§„ê³µì œ ì¶”ê°€
          .setScale(0, RoundingMode.HALF_UP); // ìµœì¢… ê²°ê³¼ì—ì„œ ë°˜ì˜¬ë¦¼ ì ìš©
    }
    ```

- **Spring Securityë¥¼ ì´ìš©í•œ API ì ‘ê·¼ ì œì–´**
  â†’ `/szs/refund` API í˜¸ì¶œ ì‹œ `Bearer Token`ì„ ê²€ì¦í•˜ì—¬ ì‚¬ìš©ìž ì •ë³´ë¥¼ í™•ì¸í•œ í›„, í•´ë‹¹ ì‚¬ìš©ìžì˜ í™˜ê¸‰ ì •ë³´ë¥¼ ë°˜í™˜

## ë°ì´í„° ëª¨ë¸

### UserIncome

- ì„¤ëª…
    - Scraping í›„ ê°€ì ¸ì˜¨ ì‚¬ìš©ìžì˜ ì†Œë“ì •ë³´ë¥¼ ì €ìž¥
    - ê²°ì •ì„¸ì•¡ ì¡°íšŒ ì‹œ í•„ìš”í•œ ë°ì´í„°ë“¤ ì €ìž¥
    - ì—°ë§ì •ì‚° ë°ì´í„°ëŠ” ë…„ë„ë³„ ì €ìž¥ë˜ëŠ” êµ¬ì¡°ë¥¼ ê°€ì§€ë©°, ì‚¬ìš©ìžì˜ ìˆ˜ìž…ê³¼ ê³µì œì •ë³´ê°€ ì—°ë„ë‹¨ìœ„ë¡œ ê´€ë¦¬ë  ìˆ˜ ìžˆìŒ
    - ðŸ‘‰ ë”°ë¼ì„œ, ì—°ë„ë¥¼ í¬í•¨í•œ ë³µí•© í‚¤(`userId + taxYear`)ë¥¼ í†µí•´ ì‚¬ìš©ìžì˜ ì—°ë§ì •ì‚° ë°ì´í„°ë¥¼ êµ¬ë¶„
- taxYearì„ í¬í•¨í•œ ì´ìœ 
    - ì—°ë§ì •ì‚°ì€ ë§¤ë…„ ê¸°ì¤€ì´ ë³€ê²½ë  ìˆ˜ ìžˆìœ¼ë¯€ë¡œ ê° ì—°ë„ì˜ ë°ì´í„°ë¥¼ ë…ë¦½ì •ìœ¼ë¡œ ì €ìž¥
    - ì¤‘ë³µ ë°ì´í„° ì €ìž¥ ë°©ì§€
    - ì´ì „ ì—°ë„ ë°ì´í„° ì¡°íšŒ ê°€ëŠ¥
    - ìµœê·¼ ì—°ë„ ì¡°íšŒ í™•ë¥ ì´ ë†’ìœ¼ë¯€ë¡œ ìºì‹± ë° ìµœì í™”ì— ìœ ë¦¬

## ì„±ëŠ¥ìµœì í™” ì „ëžµ

### **1. ë¹„ë™ê¸° ì²˜ë¦¬ (`@Async`)**

- **`/szs/scrap` ìš”ì²­ì€ API ì‘ë‹µì„ ê¸°ë‹¤ë¦´ í•„ìš” ì—†ìŒ**
- ìŠ¤í¬ëž˜í•‘ ì™¸ë¶€ API í˜¸ì¶œì‹œ 1~20ì´ˆì˜ ì‘ë‹µì´ ì†Œìš”ë  ìˆ˜ ìžˆìœ¼ë¯€ë¡œ, ë¹„ë™ê¸°ì²˜ë¦¬ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì— ë¹ ë¥¸ ì‘ë‹µ ë³´ìž¥

### **2. Timeout ì„¤ì • (API í˜¸ì¶œ ì§€ì—° ë°©ì§€)**

- ìŠ¤í¬ëž˜í•‘ API ì‘ë‹µì´ **ìµœì†Œ 1ì´ˆ ~ ìµœëŒ€ 20ì´ˆê¹Œì§€ ê±¸ë¦´ ìˆ˜ ìžˆìŒì„ ê³ ë ¤í•˜ì—¬**
- **Timeoutì„ ìµœëŒ€ 25ì´ˆ ì´ë‚´ë¡œ ì„¤ì •í•˜ì—¬ ìž¥ì‹œê°„ ëŒ€ê¸° ë°©ì§€**

### 3. ì‚¬ìš©ìž ì†Œë“ ì •ë³´ ìºì‹±

- ë°°ê²½
    - ì—°ë§ì •ì‚° ë°ì´í„°ëŠ” í•œ ë²ˆ ìŠ¤í¬ëž˜í•‘í•˜ë©´ ìžì£¼ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©°, ì´í›„ì˜ ëŒ€ë¶€ë¶„ì˜ ìš”ì²­ì€ ë‹¨ìˆœížˆ ì €ìž¥ëœ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” í˜•íƒœìž„
    - ìŠ¤í¬ëž˜í•‘ APIëŠ” í˜¸ì¶œ ì‹œ 1~20ì´ˆì˜ ì‘ë‹µ ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìžˆìœ¼ë¯€ë¡œ, ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ìºì‹œë¥¼ ì‚¬ìš©í•˜ì—¬ ìµœì í™”í•¨
    - ìºì‹œëŠ” **ìµœëŒ€ 24ì‹œê°„ ë™ì•ˆ ìœ ì§€**, í•œ ë²ˆ ì €ìž¥ëœ ë°ì´í„°ëŠ” í•´ë‹¹ ê¸°ê°„ ë™ì•ˆ ìž¬í™œìš©ë¨
- ë¡œì§

    ```
    ðŸ“Œ Scrap API ìš”ì²­ íë¦„ (/szs/scrap) 
    1ï¸âƒ£ ìŠ¤í¬ëž˜í•‘ ìš”ì²­ì„ ë°›ìŒ
    2ï¸âƒ£ ìºì‹œì— ë°ì´í„°ê°€ ìžˆìœ¼ë©´ API ìš”ì²­ì„ ìƒëžµí•˜ê³  ê¸°ì¡´ ë°ì´í„° í™œìš©
    3ï¸âƒ£ DBì— ë°ì´í„°ê°€ ìžˆìœ¼ë©´ API ìš”ì²­ì„ ìƒëžµí•˜ê³  ê¸°ì¡´ ë°ì´í„° í™œìš©
    4ï¸âƒ£ ìºì‹œ & DBì— ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°ë§Œ API í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
    5ï¸âƒ£ ìŠ¤í¬ëž˜í•‘í•œ ë°ì´í„°ë¥¼ DBì— ì €ìž¥ í›„, ìºì‹œ ë™ê¸°í™”
    
    ðŸ“Œ Refund API ìš”ì²­ íë¦„ (/szs/refund) 
    1ï¸âƒ£ í™˜ê¸‰ ì¡°íšŒ ìš”ì²­ì„ ë°›ìŒ
    2ï¸âƒ£ ìºì‹œì— ë°ì´í„°ê°€ ìžˆìœ¼ë©´ API í˜¸ì¶œ ì—†ì´ ìºì‹œ ë°ì´í„° í™œìš©
    3ï¸âƒ£ ìºì‹œì— ë°ì´í„°ê°€ ì—†ìœ¼ë©´ DBì—ì„œ ì¡°íšŒí•˜ì—¬ ë°˜í™˜
    ```

- ìž¥ì 
    - API í˜¸ì¶œì„ ìµœì†Œí™”í•˜ì—¬ **íŠ¸ëž˜í”½ê³¼ ì‘ë‹µ ì‹œê°„ ì ˆê°**
    - **ìŠ¤í¬ëž˜í•‘ ì‹œì ì—ì„œë§Œ** ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë°›ì•„ ìºì‹œë¥¼ ê°±ì‹ í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë°ì´í„° ì˜¤ì—¼ ë°©ì§€
    - **í™˜ê¸‰ ì¡°íšŒ ì‹œì—ëŠ” ìºì‹œ ë°ì´í„° ìš°ì„  í™œìš©**í•˜ì—¬ ë¹ ë¥¸ ì‘ë‹µ ì œê³µ
    - ì—°ë§ì •ì‚° ë°ì´í„°ëŠ” ìžì£¼ ë³€ê²½ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ì¼ì • ì£¼ê¸°ë¡œ **ìŠ¤ì¼€ì¤„ë§(Scheduler) ê¸°ë°˜ ë™ê¸°í™”**ë¥¼ í•˜ë©´ ë°ì´í„° ì¼ê´€ì„± ìœ ì§€ ê°€ëŠ¥(ì´ê²ƒì€ ì €ì˜ ì¶”ì¸¡ìž…ë‹ˆë‹¤)
- í•´ê²°í•´ì•¼ í•˜ëŠ” ë¬¸ì œì (ë°ì´í„° ë¶ˆì¼ì¹˜)
    - ìºì‹œì— ì €ìž¥ëœ ë°ì´í„°ê°€ ìµœì‹ ì´ ì•„ë‹ ìˆ˜ ìžˆìŒ
    - dbì— ì €ìž¥ëœ ë°ì´í„°ë„ ìµœì‹ ì´ ì•„ë‹ ìˆ˜ ìžˆìŒ
- ë°©ì•ˆ
    - ìŠ¤ì¼€ì¤„ëŸ¬ í™œìš©
        - ë§¤ì¼ íŠ¹ì • ì‹œê°„ì— ìºì‹œë¥¼ ë¬´íš¨í™”í•˜ê³  ìµœì‹ ë°ì´í„°ë¡œ ê°±ì‹ 
        - ëŒ€ëŸ‰ì˜ ë°ì´í„°ê°€ í•œë²ˆì— ì—…ë°ì´íŠ¸ ë˜ëŠ” ê²½ìš° ìœ ìš©í•¨
    - ìš”ì²­ì´ ì˜¬ë•Œë§ˆë‹¤ ë¹„ë™ê¸°ë¡œ ìµœì‹  ë°ì´í„° ë™ê¸°í™”
        - í´ë¼ì´ì–¸íŠ¸ëŠ” ìºì‹±ëœ ë°ì´í„°ë¥¼ ì¦‰ì‹œ ë°›ì•„ê°€ì§€ë§Œ
        - ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë¹„ë™ê¸°ë¡œ APIë¥¼ í˜¸ì¶œí•˜ì—¬ ìµœì‹  ë°ì´í„°ë¥¼ ê°±ì‹ 
        - ë°ì´í„° ë³€ê²½ì´ ë¹ˆë²ˆí•  ë•ŒëŠ” ìœ ìš©í•˜ì§€ë§Œ, ë™ê¸°í™” ë¶€ë‹´ì´ ì¦ê°€
    - ìºì‹œ(TTL)ì„ ë‹¨ì¶•í™” í•˜ì—¬ ìµœì‹  ë°ì´í„° ìœ ì§€
        - í˜„ìž¬ 24ì‹œê°„ì´ì§€ë§Œ, ì¶”í›„ TTLì„ ë‹¨ì¶•í•˜ì—¬ ìµœì‹  ë°ì´í„° ìœ ì§€ ê°€ëŠ¥
        - í•˜ì§€ë§Œ ìºì‹œ ìž¬ì‚¬ìš©ë¥ ì´ ë–¨ì–´ì§€ê³  DB ë¶€í•˜ê°€ ì¦ê°€í•  ìˆ˜ ìžˆìŒ

## í…ŒìŠ¤íŠ¸ ì½”ë“œ

1. íšŒì›ê°€ìž…(SIgnup)

| í…ŒìŠ¤íŠ¸ í•­ëª© | ì„¤ëª… |
| --- | --- |
| `íšŒì›ê°€ìž… ì„±ê³µ` | ì •ìƒì ì¸ íšŒì›ê°€ìž… ìš”ì²­ ì‹œ, ë°ì´í„°ê°€ ì €ìž¥ë˜ëŠ”ì§€ ê²€ì¦ |
| `ì´ë¯¸ ì¡´ìž¬í•˜ëŠ” ì‚¬ìš©ìž ê°€ìž… ì˜ˆì™¸` | ì¤‘ë³µëœ userIdë¡œ ê°€ìž… ì‹œ ì˜ˆì™¸ ë°œìƒ ì—¬ë¶€ í™•ì¸ |
| `í—ˆìš©ë˜ì§€ ì•Šì€ ì‚¬ìš©ìž ê°€ìž… ì˜ˆì™¸` | ì‚¬ì „ ë“±ë¡ëœ ì‚¬ìš©ìž ëª©ë¡ì— ì—†ëŠ” ê²½ìš° ì˜ˆì™¸ ë°œìƒ |
| `ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ì €ìž¥ ê²€ì¦` | íšŒì›ê°€ìž… ì‹œ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ê°€ ì €ìž¥ë˜ëŠ”ì§€ í™•ì¸ |
2. ë¡œê·¸ì¸

| í…ŒìŠ¤íŠ¸ í•­ëª© | ì„¤ëª… |
| --- | --- |
| `ë¡œê·¸ì¸ ì„±ê³µ` | ì˜¬ë°”ë¥¸ userId, passwordë¡œ ë¡œê·¸ì¸ ì‹œ accessToken ë°˜í™˜ ê²€ì¦ |
| `ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìž ë¡œê·¸ì¸ ì˜ˆì™¸` | ì—†ëŠ” userIdë¡œ ë¡œê·¸ì¸ ì‹œ ì˜ˆì™¸ ë°œìƒ |
| `ìž˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸ ì˜ˆì™¸` | ì˜¬ë°”ë¥´ì§€ ì•Šì€ ë¹„ë°€ë²ˆí˜¸ ìž…ë ¥ ì‹œ ì˜ˆì™¸ ë°œìƒ |
3. ì—°ë§ì •ì‚° ë°ì´í„° ìŠ¤í¬ëž˜í•‘

| í…ŒìŠ¤íŠ¸ í•­ëª© | ì„¤ëª… |
| --- | --- |
| `ìŠ¤í¬ëž˜í•‘ ì„±ê³µ` | ì •ìƒì ì¸ ìš”ì²­ ì‹œ ì—°ë§ì •ì‚° ë°ì´í„°ê°€ DBì— ì €ìž¥ë˜ëŠ”ì§€ í™•ì¸ |
| `ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìž ìš”ì²­ ì˜ˆì™¸` | ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” userIdë¡œ ìš”ì²­ ì‹œ ì˜ˆì™¸ ë°œìƒ |
| `ì™¸ë¶€ API í˜¸ì¶œ ì—¬ë¶€ ê²€ì¦` | ì™¸ë¶€ APIê°€ ì •ìƒì ìœ¼ë¡œ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ ê²€ì¦ |
| `DB ì €ìž¥ í™•ì¸` | ë³€í™˜ëœ ScrapingDataê°€ UserIncomeìœ¼ë¡œ ì €ìž¥ë˜ëŠ”ì§€ ê²€ì¦ |
4. ê²°ì •ì„¸ì•¡ ì¡°íšŒ

| `í™˜ê¸‰ì•¡ ì¡°íšŒ ì„±ê³µ` | ì •ìƒ ìš”ì²­ ì‹œ í™˜ê¸‰ì•¡ì´ ì •í™•ížˆ ê³„ì‚°ë˜ëŠ”ì§€ ê²€ì¦ |
| --- | --- |
| `ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìž ìš”ì²­ ì˜ˆì™¸` | ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìžì¼ ê²½ìš° ì˜ˆì™¸ ë°œìƒ |
| `ìŠ¤í¬ëž˜í•‘ ë°ì´í„° ì—†ëŠ” ê²½ìš° ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜` | ë°ì´í„°ê°€ ì—†ì„ ê²½ìš° ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜ ì—¬ë¶€ í™•ì¸ |
| `ì‚°ì¶œì„¸ì•¡ 6% ì ìš© í™•ì¸` | ê³¼ì„¸í‘œì¤€ì´ 1,400ë§Œ ì› ì´í•˜ì¼ ê²½ìš° 6% ì ìš© ê²€ì¦ |
| `ì„¸ì•¡ê³µì œ ë°˜ì˜ í™•ì¸` | ì„¸ì•¡ê³µì œ ì ìš© í›„ ì˜¬ë°”ë¥¸ ê²°ì •ì„¸ì•¡ ë°˜í™˜ ê²€ì¦ |
| `ê²°ì •ì„¸ì•¡ì´ ìŒìˆ˜ì¼ ê²½ìš° (-) ê°’ ë°˜í™˜` | ì„¸ì•¡ê³µì œ í›„ ìŒìˆ˜ ë°œìƒ ì‹œ ì˜¬ë°”ë¥¸ ê°’ ë°˜í™˜ |
5. ì„¸ìœ¨ êµ¬ê°„ë³„ ì‚°ì¶œì„¸ì•¡ ê³„ì‚°ì‹ ê²€ì¦(TaxCaculator)

| í…ŒìŠ¤íŠ¸ í•­ëª© | ì„¤ëª… |
| --- | --- |
| `ê³¼ì„¸í‘œì¤€ 1,400ë§Œ ì› ì´í•˜ (6%)` | ê¸°ë³¸ ì„¸ìœ¨ 6% ì ìš© ê²€ì¦ |
| `ê³¼ì„¸í‘œì¤€ 5,000ë§Œ ì› ì´í•˜ (15%)` | ì„¸ìœ¨ 15% ë° ëˆ„ì§„ê³µì œ 840,000ì› ì ìš© ê²€ì¦ |
| `ê³¼ì„¸í‘œì¤€ 8,800ë§Œ ì› ì´í•˜ (24%)` | ì„¸ìœ¨ 24% ë° ëˆ„ì§„ê³µì œ 6,240,000ì› ì ìš© ê²€ì¦ |
| `ê³¼ì„¸í‘œì¤€ 1ì–µ 5ì²œë§Œ ì› ì´í•˜ (35%)` | ì„¸ìœ¨ 35% ë° ëˆ„ì§„ê³µì œ 15,360,000ì› ì ìš© ê²€ì¦ |
| `ê³¼ì„¸í‘œì¤€ 3ì–µ ì› ì´í•˜ (38%)` | ì„¸ìœ¨ 38% ë° ëˆ„ì§„ê³µì œ 19,400,000ì› ì ìš© ê²€ì¦ |
| `ê³¼ì„¸í‘œì¤€ 5ì–µ ì› ì´í•˜ (40%)` | ì„¸ìœ¨ 40% ë° ëˆ„ì§„ê³µì œ 25,400,000ì› ì ìš© ê²€ì¦ |
| `ê³¼ì„¸í‘œì¤€ 10ì–µ ì› ì´í•˜ (42%)` | ì„¸ìœ¨ 42% ë° ëˆ„ì§„ê³µì œ 37,406,000ì› ì ìš© ê²€ì¦ |
| `ê³¼ì„¸í‘œì¤€ 10ì–µ ì› ì´ˆê³¼ (45%)` | ì„¸ìœ¨ 45% ë° ëˆ„ì§„ê³µì œ 38,406,000ì› ì ìš© ê²€ì¦ |
| `ì˜¬ë°”ë¥¸ ë°˜ì˜¬ë¦¼ ì ìš© ì—¬ë¶€ ê²€ì¦` | ì†Œìˆ˜ì ì´ ë°œìƒí•˜ëŠ” ê²½ìš° ë°˜ì˜¬ë¦¼ì´ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë˜ëŠ”ì§€ ê²€ì¦ |
| `ì‚°ì¶œì„¸ì•¡ ìŒìˆ˜ ì—¬ë¶€ ê²€ì¦` | ê³¼ì„¸í‘œì¤€ - ê³µì œì•¡ì´ ìŒìˆ˜ì¼ ê²½ìš° ì˜¬ë°”ë¥¸ ê°’ ë°˜í™˜ |

## â— ì¶”ê°€ ê³ ë ¤ì‚¬í•­ ë° í•œê³„ì 

- ê²°ì •ì„¸ì•¡ ê³„ì‚°ì„ ê²€ì¦í•˜ê¸°ê°€ ì–´ë µë‹¤
- í˜„ìž¬ **ê²°ì •ì„¸ì•¡ì„ ê³„ì‚°í•˜ëŠ” ê³¼ì •ì—ì„œ ì˜ˆìƒ ê²°ê³¼ê°’ì´ ëª…í™•í•˜ì§€ ì•Šì•„** í…ŒìŠ¤íŠ¸ ê²€ì¦ì´ ì–´ë ¤ìš´ ìƒí™©.
- ê³¼ì„¸í‘œì¤€, ì‚°ì¶œì„¸ì•¡, ì„¸ì•¡ê³µì œ ê³„ì‚°ì‹ì€ ì •ì˜ë˜ì–´ ìžˆì§€ë§Œ, **ì‹¤ì œ ì„¸ë²• ì ìš© ë° ì†Œìˆ˜ì  ë°˜ì˜¬ë¦¼ ë“± ë‹¤ì–‘í•œ ìš”ì†Œë¡œ ì¸í•´ ì •í™•í•œ ê¸°ëŒ€ê°’ì„ ì‚°ì¶œí•˜ê¸° ì–´ë ¤ì›€**.
- íŠ¹ížˆ **ì„¸ì•¡ê³µì œ í•­ëª©ì´ ì—¬ëŸ¬ ê°œ ì ìš©ë  ê²½ìš°, ìµœì¢… ê²°ê³¼ë¥¼ ê²€ì¦í•  ì •í™•í•œ ê¸°ëŒ€ê°’ì„ ëª…í™•ížˆ ì •ì˜í•´ì•¼ í•¨**.